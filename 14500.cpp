#include <iostream>
#include <algorithm>
#include <cstring>

using namespace std;

int n, m, ans;
int arr[501][501];
pair<int, int> tet[19][4] = { {{0,0},{1,0},{2,0},{3,0}}, { {0,0},{0,1},{0,2},{0,3} }, { {0,0},{1,0},{2,0},{2,1}},{{0,0},{0,1},{0,2},{1,0}},{{1,0},{1,1},{1,2},{0,2}},{{0,0},{0,1},{1,1},{2,1}},{{0,0},{0,1},{0,2},{1,2}},{{0,0},{0,1},{1,0},{2,0}},{{0,0},{1,0},{1,1},{1,2}},{{0,1},{1,1},{2,1},{2,0}}, { {0,0},{1,0},{0,1},{1,1} }, { {0,0},{1,0},{1,1},{2,1} }, {{1,0},{1,1},{0,1},{0,2}},{{0,1},{1,1},{1,0},{2,0}},{{0,0},{0,1},{1,1},{1,2}}, { {0, 0}, {0,1}, {0,2}, {1,1} },{{0,0},{1,0},{1,1},{2,0} },{{1,0},{1,1},{1,2},{0,1}},{{0,1},{1,1},{2,1},{1,0}} };

int main() {
	cin >> n >> m;

	for (int i = 0; i < n; i++)
		for (int j = 0; j < m; j++)
			cin >> arr[i][j];

	for (int i = 0; i < 19; i++) {
		for (int j = 0; j < n; j++) {
			for (int k = 0; k < m; k++) {
				int tmp = 0;
				for (int l = 0; l < 4; l++) {
					int x = tet[i][l].first + j;
					int y = tet[i][l].second + k;
					if (x >= n || y >= m) {
						tmp = 0;
						break;
					}
					tmp += arr[x][y];
				}
				ans = max(ans, tmp);
			}
		}
	}
	cout << ans;
}
